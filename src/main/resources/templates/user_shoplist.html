<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title th:text="#{shoplist}">Shopping List</title>


	<!-- Bootstrap CSS -->
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		  integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<link rel="icon" type="images/x-icon" href="/images/shoplist.icon.png">
	<link rel="stylesheet" href="/css/dashboard.css">


</head>
<body>

<!--navigation-->
<div th:replace="~{fragments/head::head}"></div>


<section class="main-content container-fluid">

	<div class="row">

		<aside class="left-side col-lg-2 col-md-12 border-right border-left border-dark mt-2">
			<div th:replace="~{fragments/sidebar-nav::sidebar-nav}"></div>
		</aside>

		<!-- Upcoming Events -->
		<aside class="right-side col-xl-10 col-md-12">

			<div class="container-fluid mt-4">

				<div class="row border-bottom border-dark">
					<h1 class="mb-2" th:text="#{shoplist} + ':'">Shopping List:</h1>
				</div>

				<div class="row mt-2">
					<h3 class="col text-danger" for="totalPrice" th:text="|#{total.price} ${totalPrice}|">Total Price:</h3>
					<div class="col">
						<form th:action="@{/user/shoplist/clear}" method="post" onsubmit="return confirmClear();">
							<button
									class="btn btn-danger"
									type="submit"
									th:text="#{clear.shopping.list}"
							>Clear Shopping List
							</button>
						</form>
					</div>
				</div>

				<div class="row">
					<div class="container-fluid">
						<form th:action="@{/user/shoplist}" th:object="${item}" th:method="post">

							<div class="row">
								<h2 th:text="#{add.product}" class="">Add Product:</h2>
								<hr>
							</div>
							<div class="row">

								<div class="col-2">
<!--									<label for="exampleColorInput" th:text="#{color}"-->
<!--										   class="mt-2 form-label">Color</label>-->
									<input type="color" th:name="color" th:field="*{color}"
										   class="form-control form-control-color" id="exampleColorInput"
										   value="#563d7c" title="Choose your color">
								</div>

								<div class="input-group col-6">

									<small class="col text-danger"
										   th:if="${#fields.hasErrors('name')}"
										   th:errors="*{name}"></small>
									<input type="text" th:name="name" th:field="*{name}" class="form-control"
										   th:placeholder="#{name}" aria-label="Recipient's username"
										   aria-describedby="basic-addon2" minlength="2" maxlength="20">
									<input type="number" th:name="price" th:field="*{price}" class="form-control"
										   th:placeholder="#{price}" aria-label="Recipient's username"
										   aria-describedby="basic-addon2" min="1.00" step="0.01">
									<div class="input-group-append">
										<button class="btn btn-success" type="submit" th:text="#{add}">Add</button>
									</div>
								</div>
							</div>
						</form>
					</div>
				</div>

				<div class="row mt-5">
					<div class="col mt-3" th:each="item : ${shoplist}">
						<form th:action="@{'/user/shoplist/' + ${item.id}}" method="post">
							<button
									class="btn"
									type="submit"
									th:text="|${item.name}: ${item.price}|"
									th:style="'background-color:' + ${item.color} + '; color: white; border: none;'">
							</button>
						</form>
					</div>
				</div>

			</div>
		</aside>
	</div>
</section>


<!--Popup confirmation message if you want to clear the whole shopping list-->
<script th:inline="javascript">
	/*<![CDATA[*/
	let clearConfirmMessage = /*[[#{shopping.clear.confirm}]]*/ 'Are you sure?';

	function confirmClear() {
		return confirm(clearConfirmMessage);
	}
	/*]]>*/
</script>

<style>
	.shopplist {
		background: #ffca2c;
		color: black;
	}

	.shopplist:hover {
		background: #ffca2c;
		color: black;
	}
</style>

<!-- Bootstrap JS and dependencies -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>